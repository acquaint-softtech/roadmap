{% extends 'custom_admin/admin_base.html' %}

{% block content %}


<div class="antialiased sans-serif bg-gray-200 h-screen">
	<a href="{% url 'custom_admin:new_task' %}">
		<button class="inline-flex px-5 py-3 text-white bg-blue-600 hover:bg-purple-700 focus:bg-blue-700 rounded-md ml-6 mb-3 mt-3">
		<svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="flex-shrink-0 h-6 w-6 text-white -ml-1 mr-2">
		  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
		</svg>
		Create new Task
	  </button>
	</a>


	<div class="container mx-auto py-6 px-4"  x-cloak>
		<h1 class="text-3xl py-4 border-b mb-10">Tasks</h1>

		<table class="table-fixed">
<div class="overflow-x-auto relative">
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr>
				<th scope="col" class="py-3 px-6">
                    ID
                </th>
                <th scope="col" class="py-3 px-6">
                    Title
                </th>
                <th scope="col" class="py-3 px-6">
                    Project
                </th>
                <th scope="col" class="py-3 px-6">
                    Board
                </th>
                <th scope="col" class="py-3 px-6">
                    User
                </th>
				<th scope="col" class="py-3 px-6">
                    Date
                </th>
                <th scope="col" class="py-3 px-6">
                    Pinned
                </th>
				<th scope="col" class="py-3 px-6">
                    Action
                </th>
            </tr>
        </thead>
        <tbody>
			{% for task in tasks %}
				<tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
					<td class="py-4 px-6">
						{{task.id}}
					</td>
					<th scope="row" class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
						{{task.name}}
					</th>
					<td class="py-4 px-6">
						{{task.project.title}}
					</td>
					<td class="py-4 px-6">
						{{task.type.name}}
					</td>
					<td class="py-4 px-6">
						{{task.created_by}}
					</td>
					<td class="py-4 px-6">
						{{task.created}}
					</td>
					<td class="py-4 px-6">
						{{task.is_pinned}}
					</td>
					<td class="py-4 px-6">
						<a href="{% url 'custom_admin:update_task' task.slug %}"><button class="inline-block px-6 py-2.5 bg-yellow-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-purple-700 hover:shadow-lg focus:bg-purple-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-purple-800 active:shadow-lg transition duration-150 ease-in-out">Edit</button></a>
                		<a href="{% url 'custom_admin:delete_task' task.slug %}"><button class="inline-block px-6 py-2.5 bg-red-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg transition duration-150 ease-in-out">Delete</button></a>
					</td>
				</tr>
			{% endfor %}
        </tbody>
    </table>

		{% if is_paginated %}
			<div class="pagination">
				<span class="page-links">
					{% if page_obj.has_previous %}
						<a href="{% url 'custom_admin:tasks' %}?page={{ page_obj.previous_page_number }}">previous</a>
					{% endif %}
					<span class="page-current">
						Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
					</span>
					{% if page_obj.has_next %}
						<a href="{% url 'custom_admin:tasks' %}?page={{ page_obj.next_page_number }}">next</a>
					{% endif %}
				</span>
			</div>
	{% endif %}
</div>
</div>

{% endblock %}